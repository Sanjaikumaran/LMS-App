{"ast":null,"code":"import{useState}from\"react\";import components from\"./components\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const{DataTableManagement,handleApiCall,Modal,createFormModal}=components;const Tests=()=>{const[isModalOpen,setIsModalOpen]=useState(false);const[modalOptions,setModalOptions]=useState();const setTime=async()=>{const createInputField=function(column){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";const inputField=document.createElement(\"input\");inputField.className=column;inputField.placeholder=column;inputField.value=value;inputField.type=\"number\";return inputField;};const columns=[\"Hours\",\"Minutes\",\"Seconds\"];let contentElements=[];try{const response=await handleApiCall({API:\"find-data\",data:{collection:\"Tests\",condition:{title:\"Time\"}}});contentElements=columns.map(column=>createInputField(column,response.flag?response.data.result[column]:\"\"));}catch(error){console.error(error.message);contentElements=columns.map(column=>createInputField(column));}const saveCallback=closeModal=>async()=>{let data={title:\"Time\"};contentElements.forEach(field=>data[field.className]=parseInt(field.value,10)||0);try{const response=await handleApiCall({API:\"update-data\",data:{condition:{title:\"Time\"},data,collection:\"Tests\"}});if(response.flag){showModal(\"Info\",\"Time Updated Successfully!\",[\"Ok\"],()=>setIsModalOpen(false));closeModal();}else{throw new Error(\"Update failed\");}}catch(error){try{const response=await handleApiCall({API:\"insert-data\",data:{data,collection:\"Tests\"}});showModal(response.flag?\"Info\":\"Error\",response.flag?\"Time Added Successfully!\":\"Error Saving Time Data\",[\"Ok\"],()=>setIsModalOpen(false));closeModal();}catch(error){console.error(error);showModal(\"Uncaught Error\",\"Error Saving Time Data\",[\"Ok\"],()=>setIsModalOpen(false));closeModal();}}};createFormModal({headingText:\"Set Time\",elements:contentElements,saveCallback:saveCallback});};const showModal=(type,message,buttons,responseFunc)=>{setModalOptions({type,message,buttons,responseFunc});setIsModalOpen(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DataTableManagement,{tablePageName:\"Test\",collectionName:\"Tests\",API:\"Upload-question\",actionButtons:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:setTime,children:\"Set Time\"})}),isModalOpen&&/*#__PURE__*/_jsx(Modal,{modalType:modalOptions.type||\"Info\",modalMessage:modalOptions.message||\"An unexpected issue occurred.\",buttons:modalOptions.buttons||[\"Ok\"],response:modalOptions.responseFunc||(()=>setIsModalOpen(false))})]});};export default Tests;","map":{"version":3,"names":["useState","components","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DataTableManagement","handleApiCall","Modal","createFormModal","Tests","isModalOpen","setIsModalOpen","modalOptions","setModalOptions","setTime","createInputField","column","value","arguments","length","undefined","inputField","document","createElement","className","placeholder","type","columns","contentElements","response","API","data","collection","condition","title","map","flag","result","error","console","message","saveCallback","closeModal","forEach","field","parseInt","showModal","Error","headingText","elements","buttons","responseFunc","children","tablePageName","collectionName","actionButtons","onClick","modalType","modalMessage"],"sources":["/home/sk/Documents/quiz-app/client/src/pages/Tests.js"],"sourcesContent":["import { useState } from \"react\";\nimport components from \"./components\";\nconst {\n  DataTableManagement,\n  handleApiCall,\n  Modal,\n  createFormModal,\n} = components;\n\nconst Tests = () => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalOptions, setModalOptions] = useState();\n\n  const setTime = async () => {\n    const createInputField = (column, value = \"\") => {\n      const inputField = document.createElement(\"input\");\n      inputField.className = column;\n      inputField.placeholder = column;\n      inputField.value = value;\n      inputField.type = \"number\";\n      return inputField;\n    };\n    const columns = [\"Hours\", \"Minutes\", \"Seconds\"];\n    let contentElements = [];\n    try {\n      const response = await handleApiCall({\n        API: \"find-data\",\n        data: { collection: \"Tests\", condition: { title: \"Time\" } },\n      });\n\n      contentElements = columns.map((column) =>\n        createInputField(\n          column,\n          response.flag ? response.data.result[column] : \"\"\n        )\n      );\n    } catch (error) {\n      console.error(error.message);\n      contentElements = columns.map((column) => createInputField(column));\n    }\n\n    const saveCallback = (closeModal) => async () => {\n      let data = { title: \"Time\" };\n      contentElements.forEach(\n        (field) => (data[field.className] = parseInt(field.value, 10) || 0)\n      );\n\n      try {\n        const response = await handleApiCall({\n          API: \"update-data\",\n          data: { condition: { title: \"Time\" }, data, collection: \"Tests\" },\n        });\n        if (response.flag) {\n          showModal(\"Info\", \"Time Updated Successfully!\", [\"Ok\"], () =>\n            setIsModalOpen(false)\n          );\n          closeModal();\n        } else {\n          throw new Error(\"Update failed\");\n        }\n      } catch (error) {\n        try {\n          const response = await handleApiCall({\n            API: \"insert-data\",\n            data: { data, collection: \"Tests\" },\n          });\n          showModal(\n            response.flag ? \"Info\" : \"Error\",\n            response.flag\n              ? \"Time Added Successfully!\"\n              : \"Error Saving Time Data\",\n            [\"Ok\"],\n            () => setIsModalOpen(false)\n          );\n          closeModal();\n        } catch (error) {\n          console.error(error);\n          showModal(\"Uncaught Error\", \"Error Saving Time Data\", [\"Ok\"], () =>\n            setIsModalOpen(false)\n          );\n          closeModal();\n        }\n      }\n    };\n\n    createFormModal({\n      headingText: \"Set Time\",\n      elements: contentElements,\n      saveCallback: saveCallback,\n    });\n  };\n\n  const showModal = (type, message, buttons, responseFunc) => {\n    setModalOptions({ type, message, buttons, responseFunc });\n    setIsModalOpen(true);\n  };\n  return (\n    <>\n      <DataTableManagement\n        tablePageName={\"Test\"}\n        collectionName={\"Tests\"}\n        API={\"Upload-question\"}\n        actionButtons={\n          <button type=\"button\" onClick={setTime}>\n            Set Time\n          </button>\n        }\n      />\n      {isModalOpen && (\n        <Modal\n          modalType={modalOptions.type || \"Info\"}\n          modalMessage={modalOptions.message || \"An unexpected issue occurred.\"}\n          buttons={modalOptions.buttons || [\"Ok\"]}\n          response={modalOptions.responseFunc || (() => setIsModalOpen(false))}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Tests;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}